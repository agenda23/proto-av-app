# gen-app 開発手順書

## フェーズ1: 基盤構築とプロトタイピング (期間: 1-2週間)

### タスク1.1: プロジェクトセットアップ
- [ ] Gitリポジトリを初期化する。
- [ ] `index.html`, `style.css`, `main.js`の雛形を作成する。
- [ ] 2つのcanvasを重ねて表示するための基本的なCSSを記述する。

### タスク1.2: ライブラリの導入と共存設定
- [ ] Three.jsとp5.js (+ p5.sound) のライブラリをCDN経由で読み込む。
- [ ] p5.jsを**Instance Mode**で初期化し、Three.jsとグローバル空間で競合しないように設定する。
- [ ] 各ライブラリの描画領域（canvas）が正しくHTML要素に紐づけられ、重なって表示されることを確認する。

### タスク1.3: オーディオエンジン・プロトタイプ
- [ ] `p5.sound`を使い、キックドラムの音を生成する関数を作成する。
- [ ] JavaScriptの`setInterval`を使い、128BPMでキック音を再生する簡単なシーケンサーを実装する。

### タスク1.4: オーディオ分析プロトタイプ
- [ ] `p5.FFT`を初期化する。
- [ ] `draw()`ループ内で`fft.analyze()`を実行し、低音域のエネルギー値を取得して`console.log`に出力する。

## フェーズ2: コア機能の実装 (期間: 2-3週間)

### タスク2.1: オーディオリアクティブな2Dビジュアル
- [ ] タスク1.4で取得したFFTデータを元に、p5.jsでスペクトラムアナライザ（棒グラフ）を描画する。
- [ ] `fft.waveform()`を使い、オシロスコープ風の波形を描画する。

### タスク2.2: オーディオリアクティブな3Dビジュアル (シーン1)
- [ ] Three.jsで基本的なシーン（カメラ、ライト、`IcosahedronGeometry`）を構築する。
- [ ] p5.jsで分析した`bass`値をグローバル変数経由でThree.jsのアニメーションループに渡す。
- [ ] `bass`値に応じて、`Icosahedron`のスケールとマテリアルの発光を変化させる。

### タスク2.3: キーボード操作の実装
- [ ] `S`キーでシーケンサーの再生/停止をトグルできるようにする。
- [ ] `A`/`D`キーでBPMを変更できるようにする。
- [ ] `1`キーでシーン1が表示されるように、シーン管理の仕組みを実装する。

### タスク2.4: サウンドの拡充
- [ ] ハイハットとベースシンセの音源をp5.jsで作成する。
- [ ] シーケンサーを拡張し、キック、ハイハット、ベースのパターンを再生できるようにする。

## フェーズ3: 表現の拡張と高度化 (期間: 2-3週間)

### タスク3.1: 3Dビジュアルの追加 (シーン2 & 3)
- [ ] シーン2 "Particle Storm"を実装する。
- [ ] `ShaderMaterial`と基本的なGLSL（頂点・フラグメントシェーダー）を使い、シーン3 "Shader Tunnel"のベースを実装する。
- [ ] オーディオデータを`uniform`変数としてシェーダーに渡し、リアクティブな表現を実装する。
- [ ] `2`, `3`キーでシーンが切り替わるようにする。

### タスク3.2: マウス/タッチ操作の実装
- [ ] ドラッグによるカメラコントロール機能を実装する。
- [ ] クリック/タップによるインタラクティブなパーティクルエフェクトをp5.jsで実装する。

## フェーズ4: 仕上げと最適化 (期間: 1-2週間)

### タスク4.1: パフォーマンスチューニング
- [ ] ブラウザの開発者ツール（Profiler）を使い、ボトルネックになっている処理を特定する。
- [ ] オブジェクト数、シェーダーの複雑さ、描画ループ内の計算量を見直し、60fpsを目指して最適化する。

### タスク4.2: UI/UXとビジュアルの改善
- [ ] UIのフォントやレイアウトを調整する。
- [ ] 各シーンのビジュアルパラメータ（色、速度、サイズなど）を微調整し、美的品質を高める。
- [ ] シーン間のトランジション（切り替え）が滑らかになるように演出を追加する。

### タスク4.3: テストとデプロイ
- [ ] Chrome, Firefox, Safariで動作確認を行い、ブラウザ間の差異を修正する。
- [ ] GitHub PagesやNetlifyなどの静的ホスティングサービスにデプロイし、公開する。